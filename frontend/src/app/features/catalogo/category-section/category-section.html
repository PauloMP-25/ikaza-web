<section *ngIf="showSection" class="category-section-minimal">

  <!-- Pre-cargar los productos filtrados 1 sola vez -->
  <ng-container *ngIf="getFilteredProducts() as filtered">

    <!-- Header Minimalista -->
    <div class="minimal-header"
         *ngIf="filtered.length > 0 && shouldShowHeader()">
      <div class="category-badge">
        <i class="bi" [ngClass]="getCategoryIcon()"></i>
        <span class="category-name">{{ category.name }}</span>
        <span class="product-count-badge">{{ filtered.length }}</span>
      </div>
    </div>

    <!-- Grid de Productos -->
    <div class="products-grid-minimal" *ngIf="filtered.length > 0">
      <div class="row g-3">
        <div class="col-12 col-sm-6 col-md-4 col-lg-3"
             *ngFor="let product of filtered">
          <app-product-card
              [product]="product"
              (viewDetails)="viewDetails($event)"
              (addToCart)="addToCart($event)">
          </app-product-card>
        </div>
      </div>
    </div>

    <!-- Mensaje si no hay productos -->
    <div *ngIf="filtered.length === 0" class="no-products-message">
      <i class="bi bi-inbox"></i>
      <p>No hay productos disponibles en esta categor√≠a.</p>
    </div>

  </ng-container>

</section>
