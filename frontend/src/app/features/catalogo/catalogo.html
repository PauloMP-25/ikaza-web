<!-- Barra de Filtros -->
<nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
    <div class="container-fluid">
        <div class="filter-buttons-container w-100">
            <button *ngFor="let cat of categories" class="btn rounded-pill px-4 fw-bold filter-btn"
                [class.active]="filteredCategory === cat.value" (click)="filterByCategory(cat.value)">
                {{ cat.name }}
            </button>
        </div>
    </div>
</nav>

<!-- Contenido Principal -->
<main class="container my-5 flex-grow-1">
    <!-- Mensaje de error -->
    <div class="alert alert-danger" *ngIf="errorMessage">
        <i class="bi bi-exclamation-triangle me-2"></i>{{ errorMessage }}
    </div>

    <!-- Loading spinner -->
    <div class="text-center py-5" *ngIf="isLoading">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-2 text-muted">Cargando productos...</p>
    </div>

    <!-- Secciones de Categorías -->
    <div class="container py-5" *ngIf="!isLoading">
        <ng-container *ngFor="let cat of categories">
            <app-category-section *ngIf="cat.value !== 'todos'" [category]="cat" [allProducts]="allProducts"
                [filteredCategory]="filteredCategory" [isAllVisible]="filteredCategory === 'todos'"
                (onQuickView)="onQuickView($event)" (onViewDetails)="onViewDetails($event)"
                (onAddToCart)="onAddToCart($event)">
            </app-category-section>
        </ng-container>

        <!-- Sin resultados -->
        <div class="text-center py-5" *ngIf="allProducts.length === 0 && !isLoading">
            <i class="bi bi-inbox display-1 text-muted"></i>
            <p class="mt-3 text-muted">No se encontraron productos</p>
        </div>
    </div>
</main>

<!-- TOAST DE NOTIFICACIÓN -->
<app-toast-notification></app-toast-notification>

<!-- Modal de Vista Rápida -->
<app-product-detail-modal *ngIf="selectedProduct" [product]="selectedProduct" [showModal]="!!selectedProduct"
    (close)="closeModal()">
</app-product-detail-modal>